---
// src/pages/cast.astro
import Layout from '../layouts/BaseLayout.astro';
import CharacterCard from '../components/CharacterCard.astro';
import { getCharacterGroups } from '../lib/cast'; // Import the data utility

interface Character {
    name: string;
    tagline: string;
    affiliation: 'primary' | 'secondary' | 'support';
    idCode: string;
    avatarSrc: string;
    motto: string;
    personality: string;
}

interface Props {
    character: Character;
}

const characterGroups = getCharacterGroups();
---

<Layout title="Casts | Novi & Kernel" description="Cast Roster | The Novi & Kernel Mission" lang="en">
    <main class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
        <!-- CHARACTER GROUPS -->
        <div class="space-y-20">
            {characterGroups.map(([groupName, characters]) => (
                <section>
                    <!-- Group Heading -->
                    <h2 class="text-xl font-heading font-bold text-neutral-dark mb-10 border-b-4 border-support-muted/50 pb-2 inline-block">
                        {groupName}
                    </h2>
                    
                    <!-- Character Grid -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
                        {characters.map((character: Character) => (
                            <CharacterCard character={character} />
                        ))}
                    </div>
                </section>
            ))}
        </div>

        <!-- CTA BACK TO MISSION -->
        <div class="dark-layer text-center mt-20 pt-10 border-t border-support-muted/30">
            <p class="text-lg text-support-tertiary mb-4">
                Roster acquired. Ready to dive into the data?
            </p>
            <a href="/blog/" class="px-8 py-3 text-lg font-semibold text-neutral-light bg-status-success rounded-lg shadow-md hover:bg-status-success/90 transition duration-300 no-underline">
                Access the Archive &rarr;
            </a>
        </div>

    </main>
</Layout>
