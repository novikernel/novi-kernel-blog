---
// src/components/CharacterCard.astro
// Renders an individual character card.

interface Character {
    name: string;
    tagline: string;
    affiliation: 'primary' | 'secondary' | 'support';
    idCode: string;
    avatarSrc: string;
    motto: string;
    personality: string;
}

interface Props {
    character: Character;
}

const { character } = Astro.props;

// Map affiliation string to the correct Tailwind color class for the border and name
let borderColorClass;
let nameColorClass;
let idCodeColorClass; // The ID code is a lighter version of the main color

if (character.affiliation === 'primary') {
    borderColorClass = 'bg-accent-primary'; // Using bg- for the strip
    nameColorClass = 'text-accent-primary';
    idCodeColorClass = 'text-accent-primary/60'; // Lighter primary for ID
} else if (character.affiliation === 'secondary') {
    borderColorClass = 'bg-accent-secondary';
    nameColorClass = 'text-accent-secondary';
    idCodeColorClass = 'text-accent-secondary/60'; // Lighter secondary for ID
} else {
    // Default for 'support' or unknown
    borderColorClass = 'bg-support-tertiary';
    nameColorClass = 'text-support-tertiary';
    idCodeColorClass = 'text-support-tertiary/60';
}
---

<div class={`relative flex flex-col sm:flex-row bg-white rounded-2xl shadow-lg border border-gray-100 max-w-lg mx-auto`}>
    
    <div class={`absolute top-0 left-0 w-3 h-full ${borderColorClass} rounded-l-2xl hidden sm:block`}></div>
    
    <div class={`flex-shrink-0 p-6 sm:pl-9 sm:pr-6 flex flex-col items-center justify-center border-b sm:border-b-0 sm:border-r border-gray-100`}>

        <div class=`w-52 h-52 ${borderColorClass} rounded-full overflow-hidden mb-4 flex-shrink-0 border border-gray-200 shadow-lg`>
            <img src={character.avatarSrc} alt={`${character.name} avatar`} class="w-full h-full object-cover">
        </div>

        <div class="text-center">
            <h2 class={`text-3xl font-heading font-extrabold mb-1 mt-0 leading-tight ${nameColorClass}`}>
                {character.name}
            </h2>
            <p class="text-base italic text-gray-600 font-body">
                "{character.tagline}"
            </p>
            <p class={`text-xs font-mono mt-1 ${idCodeColorClass}`}>
                *{character.idCode}
            </p>
        </div>
    </div>
    
    <div class="p-6 flex-grow">
        <div class="space-y-4">
            <div class="border-t sm:border-t-0 border-support-muted pt-0">
                <p class=`text-lg font-semibold ${nameColorClass} font-body mb-1`>Motto:</p>
                <p class=`text-dark-nutral/40 italic font-body `>
                    "{character.motto}"
                </p>
            </div>

            <div class="border-t border-support-muted pt-4">
                <p class=`text-lg font-semibold ${nameColorClass} font-body mb-1`>Personality:</p>
                <p class="text-dark-nutral/40 font-body">
                    {character.personality}
                </p>
            </div>    
        </div>
    </div>
</div>